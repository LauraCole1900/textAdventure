<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome, adventurer!</title>
</head>

<body>
  <script type="text/javascript">
    

    // variables
    var diceRoll = 1;
    var lost = true;
    var fight = true;


    // functions
    function dice() {
      diceRoll = Math.floor(Math.random() * 20) + 1;
      console.log(diceRoll);
      return diceRoll;
    }


    function run() {
      dice();
      if (diceRoll <= 5) {
        alert("We have died.");
      } else if (diceroll > 5 && diceRoll <= 12) {
        alert("We are wounded.");
        run();
      } else if (diceRoll > 12) {
        alert("We have escaped!");
        alert("We continue on our way.");
      }
    }


    function badlyWounded() {
      fight = confirm("We are badly wounded. Click 'OK' to continue fighting or 'Cancel' to run");
      if(fight === true) {
        dice();
        if(diceRoll <= 10) {
          alert("We have been killed.");
          alert("Game Over");
        } else if(diceRoll > 10) {
          alert("We have defeated the enemy!")
          alert("We continue on our way.")
        }
      } else if(fight === false) {
        run();
      }
    }


    function lightlyWounded() {
      fight = confirm("We are lightly wounded. Click 'OK' to continue fighting or 'Cancel' to run");
      if(fight === true) {
        dice();
        if(diceRoll <= 6) {
          alert("We have been killed.");
          alert("Game Over");
        } else if(diceRoll > 6 && diceRoll <= 12) {
          badlyWounded();
        } else if (diceroll > 12) {
          alert("We have defeated the enemy!")
          alert("We continue on our way.")
        }
      } else if(fight === false) {
        run();
      }
    }


    function fightNow() {
      fight = confirm("Fight or run? Click 'OK' to fight or 'Cancel' to run.");
      if(fight === true) {
        dice();
        if(diceRoll < 3) {
          alert("We have been killed.");
          alert("Game Over");
        } else if(diceRoll >= 3 && diceRoll < 10) {
          badlyWounded();
        } else if (diceRoll >= 11 && diceRoll < 18) {
          lightlyWounded();
        } else if(diceRoll >= 18) {
          alert("We have defeated the enemy!")
          alert("We continue on our way.")
        }
      } else if (fight === false) {
        run();
      }
    }


    function lostTrav() {
      lost = confirm("We're lost! Ask someone for directions?");
      dice();
      if(diceRoll <= 6) {
        alert("You have been directed into an ambush!");
        fightNow();
      } else if(diceRoll > 6 && diceRoll <= 12) {
        alert("Your directions were unclear.");
        lostTrav();
      } else if(diceRoll > 12) {
        alert("Your directions are correct.");
        alert("Congratulations! You have arrived safely.");
      }
    }



    // game code

    var playerName = prompt("Welcome! What is your name?");

    var join = confirm("Hello, " + playerName + "! I'm going on an adventure! Will you join me?");

    if (join === true) {
      var direction = prompt("Where shall we go? To the South is the great city of Sarvania. To the East is the Great Grassland. To the North is a the Vast, Frozen Waste. To the West is the Shining Sea. Please type 'south', 'east', 'north', or 'west'.")
      if (direction === "south") {
        dice(); {
          if (diceRoll <= 10) {
            alert("Oh, no! We've been ambushed by bandits!");
            fightNow();
            dice();
          } else if (diceRoll > 10 && diceRoll <= 15) {
            lostTrav();
            dice();
          } else if (diceRoll > 15) {
            alert("Congratulations! You have arrived safely.")





          }
        }
      } else if (direction === "east") {
        dice(); {
          if (diceRoll < 11) {
            alert("Oh, no! You've been attacked by wolves!");
            fightNow();


          } else if (diceRoll >= 11 && diceRoll < 16) {
            lostTrav();

          } else if (diceRoll >= 16) {
            alert("In the distance, you see ruins. Investigate?")





          }
        }

      } else if (direction === "north") {
        dice(); {
          if (diceRoll < 11) {
            alert("Oh, no! You've been attacked by a great white bear!");
            fightNow();


          } else if (diceRoll >= 11 && diceRoll < 16) {
            lostTrav();

          } else if (diceRoll >= 16) {
            alert("In the distance, you see a village. Investigate?")





          }
        }



      } else if (direction === "west") {
        dice(); {
          if (diceRoll < 11) {
            alert("Oh, no! You've been ambushed by raiders!");
            fightNow();


          } else if (diceRoll >= 11 && diceRoll < 16) {
            lostTrav();

          } else if (diceRoll >= 16) {
            alert("Congratulations! You have arrived at the Shining Sea. Sail on?")





          }
        }

      }

    }






    // game code






  </script>
</body>

</html>